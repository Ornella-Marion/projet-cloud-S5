import{d as S,o as B,a as R,c as y,w as n,u as a,b as w,r as v,e as k,f as s,g as r,I as F,h as T,i as L,j as i,k as N,l as V,m as $,n as d,p as b,q as t,t as u,F as x,s as P,v as A,x as E,y as U,z as j,_ as q}from"./index-BiDTwGk7.js";const H={key:0,class:"loading-spinner"},M={key:1},O={key:0},Z={key:1},G={key:2,class:"gallery"},J={class:"slide-img-container"},K=["src","onClick"],Q={class:"created-at"},W={key:2},X=S({__name:"DetailSignalement",setup(Y){const I=w(),o=v(null),f=v(!0),p=v([]),D=l=>l?new Date(l).toLocaleDateString("fr-FR"):"-",C=l=>{if(!l)return"-";const e=new Date(l);return e.toLocaleDateString("fr-FR")+" "+e.toLocaleTimeString("fr-FR")};return B(async()=>{const l=I.params.id;try{const e=await R.get("/reports/".concat(l));o.value=e.data,o.value.photo_path&&(p.value=Array.isArray(o.value.photo_path)?o.value.photo_path.map(m=>"/storage/".concat(m)):["/storage/".concat(o.value.photo_path)])}catch(e){o.value=null}finally{f.value=!1}}),(l,e)=>{const m=k("ion-slide"),h=k("ion-slides");return s(),y(a(j),null,{default:n(()=>[r(a(F),null,{default:n(()=>[r(a(T),null,{default:n(()=>[r(a(L),null,{default:n(()=>[...e[0]||(e[0]=[i("Détail du Signalement",-1)])]),_:1}),r(a(N),{slot:"start"},{default:n(()=>[r(a(V),{"default-href":"/reports-list"})]),_:1})]),_:1})]),_:1}),r(a($),null,{default:n(()=>{var _,c;return[f.value?(s(),d("div",H,[r(a(b),{name:"crescent"}),e[1]||(e[1]=t("p",null,"Chargement du signalement...",-1))])):o.value?(s(),d("div",M,[t("h2",null,u(o.value.target_type),1),t("p",null,[e[2]||(e[2]=t("strong",null,"Utilisateur :",-1)),i(" "+u(((_=o.value.user)==null?void 0:_.name)||"Inconnu"),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"Email :",-1)),i(" "+u(((c=o.value.user)==null?void 0:c.email)||"-"),1)]),o.value.road?(s(),d("p",O,[e[4]||(e[4]=t("strong",null,"Route :",-1)),i(" "+u(o.value.road.designation)+" ("+u(o.value.road.latitude)+", "+u(o.value.road.longitude)+")",1)])):(s(),d("p",Z,[...e[5]||(e[5]=[t("strong",null,"Route :",-1),i(" -",-1)])])),t("p",null,[e[6]||(e[6]=t("strong",null,"Date :",-1)),i(" "+u(D(o.value.report_date)),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Raison :",-1)),i(" "+u(o.value.reason),1)]),p.value.length?(s(),d("div",G,[e[8]||(e[8]=t("h3",null,"Photos associées",-1)),r(h,{options:l.slideOpts,class:"gallery-slides"},{default:n(()=>[(s(!0),d(x,null,P(p.value,(z,g)=>(s(),y(m,{key:g},{default:n(()=>[t("div",J,[t("img",{src:z,class:A(["gallery-img-zoom",{zoomed:l.zoomedIndex===g}]),alt:"Photo signalement",onClick:ee=>l.toggleZoom(g)},null,10,K)])]),_:2},1024))),128))]),_:1},8,["options"]),e[9]||(e[9]=t("p",{class:"gallery-tip"},"Swipez pour naviguer, touchez une photo pour zoomer/dézoomer.",-1))])):E("",!0),t("p",Q,[t("small",null,"Créé le : "+u(C(o.value.created_at)),1)])])):(s(),d("div",W,[r(a(U),{color:"danger"},{default:n(()=>[...e[10]||(e[10]=[i("Signalement introuvable.",-1)])]),_:1})]))]}),_:1})]),_:1})}}}),oe=q(X,[["__scopeId","data-v-afc2e10f"]]);export{oe as default};
