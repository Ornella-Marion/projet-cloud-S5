System.register(["./index-legacy-Cpk2geOD.js"],function(e,a){"use strict";var l,t,n,o,r,i,u,s,d,c,g,p,m,v,f,h,y,x,_,z,w,k,S,D,b,C,R,j,$;return{setters:[e=>{l=e.d,t=e.o,n=e.a,o=e.c,r=e.w,i=e.u,u=e.b,s=e.r,d=e.e,c=e.f,g=e.g,p=e.I,m=e.h,v=e.i,f=e.j,h=e.k,y=e.l,x=e.m,_=e.n,z=e.p,w=e.q,k=e.t,S=e.F,D=e.s,b=e.v,C=e.x,R=e.y,j=e.z,$=e._}],execute:function(){var a=document.createElement("style");a.textContent=".gallery[data-v-afc2e10f]{margin-top:20px}.gallery-list[data-v-afc2e10f]{display:flex;gap:10px;flex-wrap:wrap}.gallery-img[data-v-afc2e10f]{width:120px;height:120px;object-fit:cover;border-radius:8px;border:1px solid #ccc}.gallery-slides[data-v-afc2e10f]{width:100%;max-width:400px;margin:0 auto}.slide-img-container[data-v-afc2e10f]{display:flex;justify-content:center;align-items:center;height:250px}.gallery-img-zoom[data-v-afc2e10f]{width:100%;max-width:350px;max-height:240px;object-fit:contain;transition:transform .3s;cursor:zoom-in}.gallery-img-zoom.zoomed[data-v-afc2e10f]{transform:scale(2.2);cursor:zoom-out;z-index:10}.gallery-tip[data-v-afc2e10f]{text-align:center;color:#888;font-size:.95em;margin-top:8px}\n/*$vite$:1*/",document.head.appendChild(a);const F={key:0,class:"loading-spinner"},I={key:1},L={key:0},A={key:1},E={key:2,class:"gallery"},P={class:"slide-img-container"},q=["src","onClick"],O={class:"created-at"},T={key:2};e("default",$(l({__name:"DetailSignalement",setup(e){const a=u(),l=s(null),$=s(!0),U=s([]),Z=e=>e?new Date(e).toLocaleDateString("fr-FR"):"-",B=e=>{if(!e)return"-";const a=new Date(e);return a.toLocaleDateString("fr-FR")+" "+a.toLocaleTimeString("fr-FR")};return t(async()=>{const e=a.params.id;try{const a=await n.get(`/reports/${e}`);l.value=a.data,l.value.photo_path&&(U.value=Array.isArray(l.value.photo_path)?l.value.photo_path.map(e=>`/storage/${e}`):[`/storage/${l.value.photo_path}`])}catch(t){l.value=null}finally{$.value=!1}}),(e,a)=>{const t=d("ion-slide"),n=d("ion-slides");return c(),o(i(j),null,{default:r(()=>[g(i(p),null,{default:r(()=>[g(i(m),null,{default:r(()=>[g(i(v),null,{default:r(()=>[...a[0]||(a[0]=[f("Détail du Signalement",-1)])]),_:1}),g(i(h),{slot:"start"},{default:r(()=>[g(i(y),{"default-href":"/reports-list"})]),_:1})]),_:1})]),_:1}),g(i(x),null,{default:r(()=>{var u,s;return[$.value?(c(),_("div",F,[g(i(z),{name:"crescent"}),a[1]||(a[1]=w("p",null,"Chargement du signalement...",-1))])):l.value?(c(),_("div",I,[w("h2",null,k(l.value.target_type),1),w("p",null,[a[2]||(a[2]=w("strong",null,"Utilisateur :",-1)),f(" "+k((null===(u=l.value.user)||void 0===u?void 0:u.name)||"Inconnu"),1)]),w("p",null,[a[3]||(a[3]=w("strong",null,"Email :",-1)),f(" "+k((null===(s=l.value.user)||void 0===s?void 0:s.email)||"-"),1)]),l.value.road?(c(),_("p",L,[a[4]||(a[4]=w("strong",null,"Route :",-1)),f(" "+k(l.value.road.designation)+" ("+k(l.value.road.latitude)+", "+k(l.value.road.longitude)+")",1)])):(c(),_("p",A,[...a[5]||(a[5]=[w("strong",null,"Route :",-1),f(" -",-1)])])),w("p",null,[a[6]||(a[6]=w("strong",null,"Date :",-1)),f(" "+k(Z(l.value.report_date)),1)]),w("p",null,[a[7]||(a[7]=w("strong",null,"Raison :",-1)),f(" "+k(l.value.reason),1)]),U.value.length?(c(),_("div",E,[a[8]||(a[8]=w("h3",null,"Photos associées",-1)),g(n,{options:e.slideOpts,class:"gallery-slides"},{default:r(()=>[(c(!0),_(S,null,D(U.value,(a,l)=>(c(),o(t,{key:l},{default:r(()=>[w("div",P,[w("img",{src:a,class:b(["gallery-img-zoom",{zoomed:e.zoomedIndex===l}]),alt:"Photo signalement",onClick:a=>e.toggleZoom(l)},null,10,q)])]),_:2},1024))),128))]),_:1},8,["options"]),a[9]||(a[9]=w("p",{class:"gallery-tip"},"Swipez pour naviguer, touchez une photo pour zoomer/dézoomer.",-1))])):C("",!0),w("p",O,[w("small",null,"Créé le : "+k(B(l.value.created_at)),1)])])):(c(),_("div",T,[g(i(R),{color:"danger"},{default:r(()=>[...a[10]||(a[10]=[f("Signalement introuvable.",-1)])]),_:1})]))]}),_:1})]),_:1})}}}),[["__scopeId","data-v-afc2e10f"]]))}}});
